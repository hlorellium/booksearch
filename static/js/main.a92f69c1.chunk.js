(this.webpackJsonpbooksearch=this.webpackJsonpbooksearch||[]).push([[0],{17:function(e,n,t){e.exports={grid:"Books_grid__1Z-VH",container:"Books_container__1K5i7"}},2:function(e,n,t){e.exports={wrapper:"BookModal_wrapper__2gLju",modal:"BookModal_modal__11FZK",container:"BookModal_container__3ww9-",crossIcon:"BookModal_crossIcon__2hg7v",content:"BookModal_content__2ow0s",highlighted:"BookModal_highlighted__1UrBU",lineClamp:"BookModal_lineClamp__IYjnK"}},20:function(e,n,t){e.exports={item:"BookSnippet_item__3G96h"}},21:function(e,n,t){e.exports={spinner:"LoadingSpinner_spinner__3EOmd"}},22:function(e,n,t){e.exports={loadMore:"LoadMoreButton_loadMore__3rL4G"}},27:function(e,n,t){},28:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r,c=t(1),a=t.n(c),o=t(12),s=t.n(o),i=(t(27),t(28),t(10)),l=function(){return Object(i.b)()},u=i.c,d=t(5),b=t(20),j=t.n(b);function h(){return(h=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function p(e,n){if(null==e)return{};var t,r,c=function(e,n){if(null==e)return{};var t,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(c[t]=e[t]);return c}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}function f(e,n){var t=e.title,a=e.titleId,o=p(e,["title","titleId"]);return c.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 32 32",viewBox:"0 0 32 32",ref:n,"aria-labelledby":a},o),t?c.createElement("title",{id:a},t):null,r||(r=c.createElement("path",{d:"M31.5,2.42828c0-0.51752-0.20148-1.00427-0.56763-1.36987c-0.73224-0.73224-2.00751-0.73224-2.73975,0L16,13.25104L3.80737,1.05841c-0.73224-0.73224-2.00751-0.73224-2.73975,0C0.70154,1.42401,0.5,1.91077,0.5,2.42828c0,0.51746,0.20154,1.00421,0.56763,1.36987l12.19263,12.19263L1.06763,28.18341C0.70154,28.54901,0.5,29.03577,0.5,29.55328c0,0.51746,0.20154,1.00421,0.56763,1.36987c0.73224,0.73224,2.00751,0.73224,2.73975,0L16,18.73053l12.19263,12.19263c0.36615,0.36609,0.85242,0.56763,1.36987,0.56763c0.51752,0,1.00378-0.20154,1.36987-0.56763C31.29852,30.5575,31.5,30.07074,31.5,29.55328c0-0.51752-0.20148-1.00427-0.56763-1.36987L18.73975,15.99078L30.93237,3.79816C31.29852,3.4325,31.5,2.94574,31.5,2.42828z"})))}var O=c.forwardRef(f),m=(t.p,t(2)),v=t.n(m),g=t(0);var x=function(e){var n,t,r,a,o,s=e.book,i=e.setModalIsOpened,l=Object(c.useState)(s.publisher&&s.publisher.length>6),u=Object(d.a)(l,2),b=u[0],j=u[1],h=Object(c.useState)(s.isbn&&s.isbn.length>6),p=Object(d.a)(h,2),f=p[0],m=p[1],x="http://covers.openlibrary.org/b/ID/".concat(s.cover_i,"-L.jpg?default=false");return Object(g.jsx)("div",{className:v.a.wrapper,onClick:function(){return i((function(e){return!e}))},children:Object(g.jsxs)("div",{className:v.a.modal,onClick:function(e){return e.stopPropagation()},children:[Object(g.jsx)(O,{className:v.a.crossIcon,onClick:function(){return i((function(e){return!e}))}}),Object(g.jsxs)("div",{className:v.a.container,children:[Object(g.jsx)("img",{src:x,alt:""}),Object(g.jsxs)("div",{className:v.a.content,children:[Object(g.jsx)("h2",{children:s.title}),Object(g.jsx)("span",{children:"by"}),Object(g.jsx)("h3",{children:null===(n=s.author_name)||void 0===n?void 0:n.join(", ")}),s.first_publish_year?Object(g.jsxs)("p",{children:[Object(g.jsxs)("span",{className:v.a.highlighted,children:["First published in"," "]}),s.first_publish_year]}):null,s.publisher?s.publisher.length>6?b?Object(g.jsxs)("p",{children:[Object(g.jsxs)("span",{className:v.a.highlighted,children:["Published by"," "]}),null===(t=s.publisher)||void 0===t?void 0:t.slice(0,4).join(", "),"...",Object(g.jsx)("span",{className:v.a.lineClamp,onClick:function(){return j((function(e){return!e}))},children:"Show more"})]}):Object(g.jsxs)("p",{children:[Object(g.jsxs)("span",{className:v.a.highlighted,children:["Published by"," "]}),null===(r=s.publisher)||void 0===r?void 0:r.join(", "),Object(g.jsx)("span",{className:v.a.lineClamp,onClick:function(){return j((function(e){return!e}))},children:"Show less"})]}):Object(g.jsxs)("p",{children:[Object(g.jsxs)("span",{className:v.a.highlighted,children:["Published by"," "]}),s.publisher]}):null,s.isbn?s.isbn.length>6?f?Object(g.jsxs)("p",{children:[Object(g.jsxs)("span",{className:v.a.highlighted,children:["ISBN:"," "]}),null===(a=s.isbn)||void 0===a?void 0:a.slice(0,4).join(", "),"...",Object(g.jsx)("span",{className:v.a.lineClamp,onClick:function(){return m((function(e){return!e}))},children:"Show more"})]}):Object(g.jsxs)("p",{children:[Object(g.jsxs)("span",{className:v.a.highlighted,children:["ISBN:"," "]}),null===(o=s.isbn)||void 0===o?void 0:o.join(", "),Object(g.jsx)("span",{className:v.a.lineClamp,onClick:function(){return m((function(e){return!e}))},children:"Show less"})]}):Object(g.jsxs)("p",{children:[Object(g.jsxs)("span",{className:v.a.highlighted,children:["ISBN:"," "]}),s.isbn]}):null]})]})]})})};var _=function(e){var n,t=e.book,r=Object(c.useState)(!1),a=Object(d.a)(r,2),o=a[0],s=a[1],i="https://covers.openlibrary.org/b/ID/".concat(t.cover_i,"-S.jpg?default=false");return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:j.a.item,onClick:function(){return s(!0)},children:[Object(g.jsx)("img",{src:i,alt:""}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{children:t.title}),Object(g.jsxs)("span",{children:[null===(n=t.author_name)||void 0===n?void 0:n.join(", ")," "]})]})]}),o?Object(g.jsx)(x,{book:t,setModalIsOpened:s}):null]})},y=t(11),k=t(4),w=t.n(k),N=t(9),B=t(6);function C(e){return S.apply(this,arguments)}function S(){return(S=Object(N.a)(w.a.mark((function e(n){var t,r,c,a,o=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:1,r=n.split(" ").join("+"),c=1===t?"https://openlibrary.org/search.json?q=".concat(r):"https://openlibrary.org/search.json?q=".concat(r,"&page=").concat(t),e.next=5,fetch(c);case 5:return a=e.sent,e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=Object(B.b)("books/loadNextPage",function(){var e=Object(N.a)(w.a.mark((function e(n){var t,r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.page,r=n.query){e.next=3;break}return e.abrupt("return",{docs:[]});case 3:return e.next=5,C(r,t);case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),E=Object(B.b)("books/loadBooks",function(){var e=Object(N.a)(w.a.mark((function e(n){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",{docs:[]});case 2:return e.next=4,C(n);case 4:return t=e.sent,e.abrupt("return",[t,n]);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),M=Object(B.c)({name:"books",initialState:{docs:[],page:1,status:"idle",query:"",numFound:0},reducers:{},extraReducers:function(e){e.addCase(E.pending,(function(e){e.status="loading",e.docs=[],e.page=2})).addCase(E.fulfilled,(function(e,n){e.status="idle",n.payload[0]&&(e.docs=Object(y.a)(n.payload[0].docs).sort((function(e,n){return n.edition_count-e.edition_count})),e.query=n.payload[1],e.numFound=n.payload[0].numFound)})).addCase(I.pending,(function(e){e.status="loading"})).addCase(I.fulfilled,(function(e,n){e.status="idle",e.docs=[].concat(Object(y.a)(e.docs),Object(y.a)(Object(y.a)(n.payload.docs).sort((function(e,n){return n.edition_count-e.edition_count})))),e.page=e.page+1,e.numFound=n.payload.numFound}))}}),L=function(e){return e.books.docs},F=function(e){return e.books.status},P=function(e){return e.books.query},q=function(e){return e.books.page},z=function(e){return e.books.numFound},R=M.reducer,G=t(17),K=t.n(G),A=t(21),D=t.n(A);var J=function(){return Object(g.jsxs)("div",{className:D.a.spinner,children:[Object(g.jsx)("div",{}),Object(g.jsx)("div",{})]})},T=t(22),U=t.n(T);var W=function(){var e=u(L),n=u(P),t=u(q),r=u(z),c=u(F),a=l();return Object(g.jsx)(g.Fragment,{children:r>e.length&&"idle"===c?Object(g.jsx)("button",{className:U.a.loadMore,onClick:function(){return a(I({query:n,page:t}))},children:"Load more"}):null})};var Z,H=function(){var e=u(L),n=u(F);return Object(g.jsxs)("div",{className:K.a.container,children:[Object(g.jsx)("div",{className:K.a.grid,children:e.map((function(e,n){return Object(g.jsx)(_,{book:e},n)}))}),"loading"===n?Object(g.jsx)(J,{}):null,Object(g.jsx)(W,{})]})},V=t(7),X=t.n(V);function Y(){return(Y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function $(e,n){if(null==e)return{};var t,r,c=function(e,n){if(null==e)return{};var t,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(c[t]=e[t]);return c}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}function Q(e,n){var t=e.title,r=e.titleId,a=$(e,["title","titleId"]);return c.createElement("svg",Y({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:n,"aria-labelledby":r},a),t?c.createElement("title",{id:r},t):null,Z||(Z=c.createElement("g",{"data-name":"Layer 2"},c.createElement("g",{"data-name":"search"},c.createElement("rect",{width:24,height:24,opacity:0}),c.createElement("path",{d:"M20.71 19.29l-3.4-3.39A7.92 7.92 0 0 0 19 11a8 8 0 1 0-8 8 7.92 7.92 0 0 0 4.9-1.69l3.39 3.4a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 11a6 6 0 1 1 6 6 6 6 0 0 1-6-6z"})))))}var ee=c.forwardRef(Q);t.p;var ne=function(){var e=Object(c.useState)(""),n=Object(d.a)(e,2),t=n[0],r=n[1],a=l();return Object(c.useEffect)((function(){var e=setTimeout((function(){a(E(t))}),1e3);return function(){return clearTimeout(e)}}),[t,a]),Object(g.jsxs)("div",{className:X.a.container,children:[Object(g.jsx)("div",{children:Object(g.jsx)("h2",{className:X.a.title,children:"Enter book's title"})}),Object(g.jsxs)("div",{className:X.a.search,children:[Object(g.jsx)("input",{type:"search",name:"booksSearch",value:t,onChange:function(e){r(e.target.value)},autoFocus:!0,className:X.a.searchInput}),Object(g.jsx)("button",{type:"submit",onClick:function(){return a(E(t))},children:Object(g.jsx)(ee,{className:X.a.searchIcon})})]})]})};var te=function(){return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(ne,{}),Object(g.jsx)(H,{})]})},re=Object(B.a)({reducer:{books:R}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(i.a,{store:re,children:Object(g.jsx)(te,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,n,t){e.exports={container:"SearchBar_container__fRl76",title:"SearchBar_title__GvExL",search:"SearchBar_search__w0EbE",searchIcon:"SearchBar_searchIcon__3zXh3"}}},[[39,1,2]]]);
//# sourceMappingURL=main.a92f69c1.chunk.js.map